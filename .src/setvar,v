head	1.3;
access;
symbols;
locks
	rchansen:1.3;
comment	@# @;
expand	@b@;


1.3
date	2020.11.19.06.39.39;	author rchansen;	state Exp;
branches;
next	1.2;

1.2
date	2020.11.18.05.20.44;	author rchansen;	state Exp;
branches;
next	1.1;

1.1
date	2020.11.17.22.42.45;	author rchansen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@setvar as a script does not retain setting of $rchjlp because if it execed.
@
text
@#!/usr/bin/env bash

# function to copy at top and use ech0 (rather than ech1
function ech0 () {     # turn on debugging with  export ech0=ON
  if [ ".$ech0" == ".ON" ]; then
    echo $@@
  fi  
}

thefile=$0
its_dir=`dirname $thefile`
suffix=`basename $PWD`
read -r build_dir rest < $its_dir/builddir

if [ ".$suffix" != ".$build_dir" ]; then
  echo "Mismatch found. '$suffix' not '$build_dir'"
  echo "Please change the first word on the first line of "
  echo "$PWD/builddir to be $suffix."
  exit 8
fi

cat << EOF-info
  This is the initial script to setup the 'whereis' project.
it should be $0.

  The build directory for 'whereis' contains the script(s) and parm
file(s) to create a running system.  Currently it is thought to be
$HOME/$build_dir.

-------------------------
EOF-info

echo -n "Is the above correct (y/n): "
read answer rest

if [ ".$answer" == ".y" ]; then
  echo "On we go."

cat << EOF-execset
    
    You will now set the single global variable used by this
 'whereis' system ( \$rchjlp ).  It will ALSO be the directory
 for the execution library.

EOF-execset

    read -r default rest < $its_dir/execdir
    echo "The current default is "$default
    echo -n "Enter the value for \$rchjlp variable(CR for default): "
    read mychoice rest

    if [ ".$mychoice" == "." ]; then        # take the default
    echo "You have chosen to take the default : "$default
    echo "FYI - this is word 1 in line 1 of "$its_dir/execdir
    mychoice=$default
    fi

    # (re)set the execute dir base
    echo $mychoice > $its_dir/execdir
    date >> $its_dir/execdir      # include timestamp in exedir

    export rchjlp=$mychoice
    echo "and now \$rchjlp is $rchjlp"
    echo
    echo "You may run this script multiple times."
    echo "The value for \$rchjlp will be set by the last run."
    echo "By the way, 'rchjlp' is derive as the initial of me -"
    echo "Robert C. Hansen  and Jean-Luc Picard."
else 
  echo "answer ($answer) was other than 'y' "
  echo "I now quit for you to figure out why. "
  exit 4
fi
@


1.2
log
@exec form of script
@
text
@d3 7
d12 1
d15 7
d27 2
a28 2
file(s) to run the system.  Currently it is thought to be
$HOME$/build_dir.
d38 31
d70 1
a70 1
  echo "answer was other than 'y' "$answer
a73 13

cat << EOF-execset
  
  You will now set the
EOF-execset

echo -n "Enter the value for \$rchjlp variable: "
read rchjlp rest
echo $rchjlp > $its_dir/execdir
date >> $its_dir/execdir

export rchjlp=$rchjlp
echo "and now rchjlp is $rchjlp"
@


1.1
log
@orig pre-rchjlp ver.
@
text
@d3 38
a40 13
echo
echo "Please be sure you invoked this as  'source setvar' or '. setvar"
echo "If you did not, variable  rchjlp will not remain set."
echo
echo -n "You will use $HOME/\$rchjlp files, Enter your variable: "
read myvar_to_use

export rchjlp=$myvar_to_use

echo "rchjlp var is : $rchjlp"
echo
echo "As a savety enter   echo \$rchjlp   or  chkvar (after environme is
ready."
@
